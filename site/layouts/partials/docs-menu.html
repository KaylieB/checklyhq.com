<aside class="docs-menu">
  <nav>
    <a
        class="api-reference-link"
        href="/docs/api"
        target="_blank">API reference
      <div class="badge badge-accent badge-sm ml-2">beta</div></a>
    <ul class="docs-menu-content">
      {{ $currentPage := . }}
      {{ range .Site.Menus.docs }} {{ if .HasChildren }}
      <li class='docs-menu-item {{ if $currentPage.HasMenuCurrent "docs" . }}active{{ end }}'>
        <a class='docs-menu-title {{ if $currentPage.HasMenuCurrent "docs" . }}active{{ end }}' href="{{.URL}}">{{.Name}}</a>

        {{if $currentPage.HasMenuCurrent "docs" . }}


        <ul class="docs-menu-sub">
          {{range .Children}} {{ $has := $currentPage.IsMenuCurrent "docs" . }}
          <li class="docs-menu-sub-item {{if $has}}active{{end}}">
            <a href="{{.URL}}">
              {{ partial "docs-title" . }}
            </a>
          </li>
          {{end}}
        </ul>

        {{end}}

      </li>
      {{else}}
      <li class="docs-menu-item">
        <div class="docs-menu-title">{{.Name}}</div>
      </li>
      {{end}} {{end}}
    </ul>
  </nav>

  <!-- Restore menu position as soon as possible to avoid flickering -->
  <script>
    (function () {
      var menu = document.querySelector('aside.docs-menu nav')
  addEventListener('beforeunload', function () {
        localStorage.setItem('menu.scrollTop', menu.scrollTop)
  })
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
  </script>

</aside>


