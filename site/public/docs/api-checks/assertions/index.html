<!DOCTYPE html>
<html lang="en">
<head>
  <head>
  <title>Assertions | Checkly </title>
  <meta charset="utf-8" />
  <meta name="description" content="The response of an API request can be checked for correctness and timeliness by using assertions on the response data. Assertions are flexible statements that combine preset modifiers with custom values to meet the needs of a broad set of use cases.
How assertions work Assertions are statements you create that check one aspect of the HTTP response. You can create multiple assertions for one check that assert various aspects of a response, for example:" />
  <meta name="viewport" content="width=device-width" initial-scale="1" maximum-scale="1" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Assertions | Checkly " />
  <meta property="og:description" content="The response of an API request can be checked for correctness and timeliness by using assertions on the response data. Assertions are flexible statements that combine preset modifiers with custom values to meet the needs of a broad set of use cases.
How assertions work Assertions are statements you create that check one aspect of the HTTP response. You can create multiple assertions for one check that assert various aspects of a response, for example:" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://checklyhq.com/images/dashboard-screen@2x.png" />
  <meta property="twitter:card" content="summary" />
  <meta property="twitter:title" content="Assertions | Checkly " />
  <meta property="twitter:description" content="The response of an API request can be checked for correctness and timeliness by using assertions on the response data. Assertions are flexible statements that combine preset modifiers with custom values to meet the needs of a broad set of use cases.
How assertions work Assertions are statements you create that check one aspect of the HTTP response. You can create multiple assertions for one check that assert various aspects of a response, for example:" />
  <meta property="og:image" content="https://checklyhq.com/images/dashboard-screen@2x.png" />
  <meta name="msvalidate.01" content="36F243A91FAA24DE468D8A8EECF33554" />
  <link rel="icon" type="image/png" href="/images/racoon_favicon.png" />
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
  <link rel="alternate" href="https://checklyhq.com/docs/api-checks/assertions/" hreflang="en-us" />
  <link rel="canonical" href="https://checklyhq.com/docs/api-checks/assertions/" />
  <link rel="stylesheet" href="/css/style.css" />
  <script async src="https://cdn.cookielaw.org/consent/e4c8a868-c0ad-4c0c-b61e-f6eb6cad2810.js" type="text/javascript" charset="UTF-8"></script>
  <script type="text/javascript">
    function OptanonWrapper() {}
  </script>
  <style>
    .qc-cmp-ui {
      background-color: #45c8f1 !important;
    }

    .qc-cmp-publisher-purposes-table .qc-cmp-table-header {
      background-color: #fafafa !important;
    }

    .qc-cmp-publisher-purposes-table .qc-cmp-table-row {
      background-color: #ffffff !important;
    }
  </style>
  
  <script type="text/plain" async src="https://www.googletagmanager.com/gtag/js?id=UA-110523681-1" class="optanon-category-2"></script>
  <script type="text/plain" async class="optanon-category-2">
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-110523681-1');
  </script>
  
  <script>
    window.intercomSettings = {
      app_id: 'ep3ft8gg',
      custom_launcher_selector: '.open-intercom-link'
    }
  </script>
  <script async class="optanon-category-2">(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/ep3ft8gg';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();</script>

  <script type="text/javascript" class="optanon-category-2">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
    heap.load("3553865455");
  </script>

  
  <script type="text/javascript" class="optanon-category-2">
    (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:717179,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
</head>

</head>

<body>
  <nav class="navbar navbar-toggleable-md fixed-top">
  <div class="container">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"><span></span><span></span><span></span></button>
    <a class="navbar-brand mr-2" href="/"><img src="/images/text_racoon_logo.svg" width="120" alt="checkly logo"/></a><a
      class="callout" href="/jobs">We're hiring!</a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-toggle="dropdown"
                                         id="navbarDropdownMenuLink" href="#">Product</a>
          <div class="dropdown-menu big-drop-shadow product-dropdown"><a class="dropdown-item"
                                                                         href="/product/api-monitoring/">API
            Monitoring</a><a class="dropdown-item" href="/product/transaction-monitoring/">Site Transaction
            Monitoring</a><a class="dropdown-item" href="/product/alerting/">Alerting</a></div>
        </li>
        <li class="nav-item"><a class="nav-link" href="/pricing">Pricing</a></li>
        <li class="nav-item"><a class="nav-link" href="/docs">Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="https://blog.checklyhq.com" target="_blank">Blog</a></li>
        
          <form class="form-inline">
            <input class="form-control py-2" id="search" type="search" placeholder="Search the docs..."/>
          </form>
        
      </ul>
    </div>
  </div>
</nav>

  
  <div class="d-flex container-fluid docs">
    <aside class="docs-menu">
  <nav>
    <a
        class="api-reference-link"
        href="/docs/api"
        target="_blank">API reference
      <div class="badge badge-accent badge-sm ml-2">beta</div></a>
    <ul class="docs-menu-content">
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">Monitoring</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/monitoring/">
              How we run checks
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/monitoring/global-locations/">
              Global locations
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/monitoring/how-we-store-data/">
              How we store data
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/monitoring/storing-secrets/">
              Storing secrets
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/monitoring/white-listing/">
              White listing &amp; filtering traffic
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">API Checks</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/api-checks/">
              Overview
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/api-checks/request-settings/">
              HTTP request settings
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/api-checks/variables/">
              Environment variables
            </a>
          </li>
           
          <li class="docs-menu-sub-item active">
            <a href="/docs/api-checks/assertions/">
              Assertions
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/api-checks/limits/">
              Response time limits
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/api-checks/setup-teardown-scripts/">
              Setup &amp; teardown scripts
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/api-checks/timouts-timing/">
              Timeouts and timing phases
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">Browser Checks</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/">
              Quickstart
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/scraping-onpage-elements/">
              Scraping &amp; asserting on page elements
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/screenshots/">
              Taking screenshots
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/variables/">
              Environment variables
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/login-scenarios/">
              Login scenarios
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/partials-code-snippets/">
              Partials and code snippets
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/using-mocha/">
              Using Mocha with Puppeteer
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/timeouts/">
              Timeouts
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/responsible-use/">
              Responsible use
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/browser-checks/runner-specification/">
              Runner specification
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">Alerting</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/alerting/">
              Alert settings
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/alerting/alert-channels/">
              Alert channels
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/alerting/alert-states/">
              Alert states
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/alerting/ssl-expiration/">
              SSL certificate expiration
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/alerting/sms-delivery/">
              SMS delivery
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/alerting/webhooks/">
              Webhooks
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">CI/CD integration</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/cicd/github/">
              Github deployments
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/cicd/triggers/">
              Command Line triggers
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">Dashboards</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/dashboards/">
              Url and Custom Domain
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/dashboards/dashboard-look-feel/">
              Look &amp; feel
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">Teams</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/teams/">
              Adding team members
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/teams/about-roles/">
              About roles
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">Integrations</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/integrations/pagerduty/">
              Pagerduty
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/integrations/prometheus/">
              Prometheus
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/integrations/github/">
              Github
            </a>
          </li>
          
        </ul>
      </li>
        
      <li class="docs-menu-item">
        <div class="docs-menu-title">Puppeteer Recorder</div>
        <ul class="docs-menu-sub">
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/puppeteer-recorder/">
              Overview
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/puppeteer-recorder/installation/">
              Installation
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/puppeteer-recorder/basic-usage/">
              Basic Usage
            </a>
          </li>
           
          <li class="docs-menu-sub-item ">
            <a href="/docs/puppeteer-recorder/development/">
              Development
            </a>
          </li>
          
        </ul>
      </li>
       
    </ul>
  </nav>

  
  <script>
    (function () {
      var menu = document.querySelector('aside.docs-menu nav')
  addEventListener('beforeunload', function () {
        localStorage.setItem('menu.scrollTop', menu.scrollTop)
  })
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
  </script>

</aside>



    <div class="docs-page">
      <article class="markdown">
        <h1>Assertions</h1>
        
        <div class="docs-toc-mobile">
          <nav id="TableOfContents">
  <ul>
    <li><a href="#how-assertions-work">How assertions work</a></li>
    <li><a href="#source">Source</a></li>
    <li><a href="#property">Property</a></li>
    <li><a href="#comparison">Comparison</a></li>
    <li><a href="#target">Target</a></li>
    <li><a href="#json-responses-with-json-path">JSON responses with JSON path</a>
      <ul>
        <li><a href="#json-path-primer">JSON path primer</a></li>
        <li><a href="#asserting-basic-types">Asserting basic types</a></li>
        <li><a href="#nested-properties">Nested properties</a></li>
        <li><a href="#asserting-arrays">Asserting arrays</a></li>
      </ul>
    </li>
    <li><a href="#deprecated-custom-non-json-path-properties">Deprecated: Custom, non-JSON path properties</a></li>
    <li><a href="#using-regular-expressions">Using regular expressions</a>
      <ul>
        <li><a href="#text-body-assertions-with-regular-expressions">Text body assertions with regular expressions</a></li>
        <li><a href="#header-assertions-with-regular-expressions">Header assertions with regular expressions</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
        <p>The response of an API request can be checked for correctness and timeliness by using assertions on the response data. Assertions are flexible statements that combine preset modifiers with custom values to meet the needs of a broad set of use cases.</p>
<h2 id="how-assertions-work">How assertions work</h2>
<p>Assertions are statements you create that check one aspect of the HTTP response. You can create multiple assertions for one check that assert various aspects of a response, for example:</p>
<ul>
<li>HTTP response status equals 200.</li>
<li>HTTP response body equals the text &ldquo;success&rdquo;.</li>
<li>HTTP response time is lower than 2000 milliseconds.</li>
<li>HTTP response header &ldquo;X-Custom-Header&rdquo; equals &ldquo;SomeValue&rdquo;.</li>
<li>HTTP response JSON object has a key called &ldquo;accountBalance&rdquo; with a value greater than 9999</li>
</ul>
<p>In each assertion, a <strong>source</strong> is connected to a <strong>comparison</strong> and a <strong>target</strong>.</p>
<p><img src="/docs/images/api-checks/assertions-1.png" alt="api monitoring assertions example 1"></p>
<p>In some cases a <strong>property</strong> is added, for example when asserting headers or JSON response bodies.</p>
<p><img src="/docs/images/api-checks/assertions-2.png" alt="api monitoring assertions example 2"></p>
<p>Assertions are executed from top to bottom. If one assertion fails, the full check is considered as failed.</p>
<h2 id="source">Source</h2>
<p>On each API check assertion, the following sources are available:</p>
<ul>
<li><strong>Status code:</strong> The HTTP response status, parsed as an integer.</li>
<li><strong>JSON body:</strong> The response body parsed as a JSON object.</li>
<li><strong>Text body:</strong> The response body as plain text.</li>
<li><strong>Headers:</strong> The response headers as an array of key/value pairs.</li>
<li><strong>Response time:</strong> The response time of the full API request in milliseconds, parsed as an integer value.</li>
</ul>
<h2 id="property">Property</h2>
<p>The property field is a free form text field used to identify the name of a header, the part of a JSON object using JSON path
or part of text body.</p>
<ul>
<li>
<p>With <strong>JSON response bodies</strong>, the property field accepts <strong>JSON path</strong> expression in the form of dot-separated strings to
target nested properties in an object, i.e. <code>$.product.size</code> or an item in an array, i.e. <code>$.[1].key</code></p>
</li>
<li>
<p>With <strong>text response bodies</strong>, the property field accepts a <strong>regular expression</strong> with a capture group to pick out parts,
i.e. <code>&lt;!doctype (.{4})</code> would grab the word <code>html</code> from a body return <code>&lt;doctype html&gt;</code></p>
</li>
<li>
<p>With <strong>headers</strong>, you provide the header you want to assert in the property field, i.e. <code>Content-Type</code>. You can even add a
regular expression after that to tease out a specific part of the header.</p>
</li>
</ul>
<p>Read more about asserting JSON response bodies below.</p>
<h2 id="comparison">Comparison</h2>
<p>Comparisons are the operators that work on the source data and target data, i.e.</p>
<ul>
<li>Response time is <code>LESS THAN</code> 150 milliseconds.</li>
<li>Status code <code>EQUALS</code> 200.</li>
<li>Header X-MY-HEADER <code>CONTAINS</code> the string <code>some value</code>.</li>
</ul>
<p>The following comparisons are available. Note that some comparisons don't make sense when paired with a specific source.
Response time is empty? JSON Object is less than? We block out the comparisons when they are not applicable to the source.</p>
<ul>
<li>Equals / Not equals</li>
<li>Is empty / Not empty</li>
<li>Greater than</li>
<li>Less than</li>
<li>Contains / Not contains</li>
<li>Has key / Not has key (deprecated)</li>
<li>Has value / Not has value (deprecated)</li>
</ul>
<div class="alert alert-warning">The <strong>Has key</strong> and <strong>Has value</strong> comparison are deprecated. They belong to our <a href="">old style of asserting JSON objects</a> before we introduced JSON Path</div>

<h2 id="target">Target</h2>
<p>The target field is a free form text field that determines the desired outcome of your assertion.</p>
<h2 id="json-responses-with-json-path">JSON responses with JSON path</h2>
<p>You can use <strong>JSON path</strong> to specify which field of a JSON response body should be asserted. JSON path is a query language
similar to Xpath for XML, but in general a lot more intuitive and simpler to use.</p>
<h3 id="json-path-primer">JSON path primer</h3>
<p>JSON path only uses a handful of operators in its queries. Not all of them are useful in the context of assertions.
Here is an adapted set of examples based on  <a href="http://goessner.net/articles/JsonPath/">Stefan Goessner's 2007 introduction post</a>.</p>
<table>
<thead>
<tr>
<th>JSONPath</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$</code></td>
<td>The root object/element</td>
</tr>
<tr>
<td><code>@</code></td>
<td>The current object/element</td>
</tr>
<tr>
<td><code>.</code></td>
<td>Child member operator</td>
</tr>
<tr>
<td><code>..</code></td>
<td>Recursive descendant operator; JSONPath borrows this syntax from E4X</td>
</tr>
<tr>
<td><code>*</code></td>
<td>Wildcard matching all objects/elements regardless their names</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>Subscript operator</td>
</tr>
<tr>
<td><code>[,]</code></td>
<td>Union operator for alternate names or array indices as a set</td>
</tr>
<tr>
<td><code>[start:end:step]</code></td>
<td>Array slice operator borrowed from ES4 / Python</td>
</tr>
<tr>
<td><code>?()</code></td>
<td>Applies a filter (script) expression via static evaluation</td>
</tr>
<tr>
<td><code>()</code></td>
<td>Script expression via static evaluation</td>
</tr>
</tbody>
</table>
<p>Given this sample data set, see example expressions below:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">&#34;store&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;book&#34;</span><span class="o">:</span> <span class="p">[</span> 
      <span class="p">{</span>
        <span class="s2">&#34;category&#34;</span><span class="o">:</span> <span class="s2">&#34;reference&#34;</span><span class="p">,</span>
        <span class="s2">&#34;author&#34;</span><span class="o">:</span> <span class="s2">&#34;Nigel Rees&#34;</span><span class="p">,</span>
        <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Sayings of the Century&#34;</span><span class="p">,</span>
        <span class="s2">&#34;price&#34;</span><span class="o">:</span> <span class="mf">8.95</span>
      <span class="p">}</span><span class="p">,</span> <span class="p">{</span>
        <span class="s2">&#34;category&#34;</span><span class="o">:</span> <span class="s2">&#34;fiction&#34;</span><span class="p">,</span>
        <span class="s2">&#34;author&#34;</span><span class="o">:</span> <span class="s2">&#34;Evelyn Waugh&#34;</span><span class="p">,</span>
        <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Sword of Honour&#34;</span><span class="p">,</span>
        <span class="s2">&#34;price&#34;</span><span class="o">:</span> <span class="mf">12.99</span>
      <span class="p">}</span><span class="p">,</span> <span class="p">{</span>
        <span class="s2">&#34;category&#34;</span><span class="o">:</span> <span class="s2">&#34;fiction&#34;</span><span class="p">,</span>
        <span class="s2">&#34;author&#34;</span><span class="o">:</span> <span class="s2">&#34;Herman Melville&#34;</span><span class="p">,</span>
        <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Moby Dick&#34;</span><span class="p">,</span>
        <span class="s2">&#34;isbn&#34;</span><span class="o">:</span> <span class="s2">&#34;0-553-21311-3&#34;</span><span class="p">,</span>
        <span class="s2">&#34;price&#34;</span><span class="o">:</span> <span class="mf">8.99</span>
      <span class="p">}</span><span class="p">,</span> <span class="p">{</span>
         <span class="s2">&#34;category&#34;</span><span class="o">:</span> <span class="s2">&#34;fiction&#34;</span><span class="p">,</span>
        <span class="s2">&#34;author&#34;</span><span class="o">:</span> <span class="s2">&#34;J. R. R. Tolkien&#34;</span><span class="p">,</span>
        <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;The Lord of the Rings&#34;</span><span class="p">,</span>
        <span class="s2">&#34;isbn&#34;</span><span class="o">:</span> <span class="s2">&#34;0-395-19395-8&#34;</span><span class="p">,</span>
        <span class="s2">&#34;price&#34;</span><span class="o">:</span> <span class="mf">22.99</span>
      <span class="p">}</span>
    <span class="p">]</span><span class="p">,</span>
    <span class="s2">&#34;bicycle&#34;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&#34;color&#34;</span><span class="o">:</span> <span class="s2">&#34;red&#34;</span><span class="p">,</span>
      <span class="s2">&#34;price&#34;</span><span class="o">:</span> <span class="mf">19.95</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>JSON path expressions using the store example above:</p>
<table>
<thead>
<tr>
<th>JSONPath</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$.store.book[*].author</code></td>
<td>The authors of all books in the store</td>
</tr>
<tr>
<td><code>$..author</code></td>
<td>All authors</td>
</tr>
<tr>
<td><code>$.store.*</code></td>
<td>All things in store, which are some books and a red bicycle</td>
</tr>
<tr>
<td><code>$.store..price</code></td>
<td>The price of everything in the store</td>
</tr>
<tr>
<td><code>$..book[2]</code></td>
<td>The third book</td>
</tr>
<tr>
<td><code>$..book[(@.length-1)]</code></td>
<td>The last book via script subscript</td>
</tr>
<tr>
<td><code>$..book[-1:]</code></td>
<td>The last book via slice</td>
</tr>
<tr>
<td><code>$..book[0,1]</code></td>
<td>The first two books via subscript union</td>
</tr>
<tr>
<td><code>$..book[:2]</code></td>
<td>The first two books via subscript array slice.</td>
</tr>
<tr>
<td><code>$..book[?(@.isbn)]</code></td>
<td>Filter all books with isbn number</td>
</tr>
<tr>
<td><code>$..book[?(@.price&lt;10)]</code></td>
<td>Filter all books cheaper than 10</td>
</tr>
<tr>
<td><code>$..book[?(@.price==8.95)]</code></td>
<td>Filter all books that cost 8.95</td>
</tr>
<tr>
<td><code>$..book[?(@.price&lt;30 &amp;&amp; @.category==&quot;fiction&quot;)]</code></td>
<td>Filter all fiction books cheaper than 30</td>
</tr>
<tr>
<td><code>$..*</code></td>
<td>All members of JSON structure</td>
</tr>
</tbody>
</table>
<p>Keep two things in mind:</p>
<ol>
<li>
<p>Always start your statement with the <code>$</code> sign.</p>
</li>
<li>
<p>Your JSON path expression should return <strong>exactly one value</strong>. JSON path has the option to returns arrays of value,
but Checkly cannot assert them.</p>
</li>
</ol>
<p>Use this <a href="https://jsonpath.com/">online editor to play around</a>, or look at the examples below. We use this <a href="https://github.com/dchester/jsonpath">jsonpath NPM
module</a> under the hood.</p>
<h3 id="asserting-basic-types">Asserting basic types</h3>
<p>Asserting string, boolean and number values works exactly as you'd expect, e.g. the example below asserts the number value of
the <code>id</code> property is greater than <code>2000</code>.</p>
<p><img src="/docs/images/api-checks/assertions-4.png" alt="api monitoring assertions example 4"></p>
<h3 id="nested-properties">Nested properties</h3>
<p>You can traverse a JSON object using a dot notation. In the example below we are checking the string-based <code>size</code>
property that is part of the <code>product</code> object in the JSON response.</p>
<p><img src="/docs/images/api-checks/assertions-3.png" alt="api monitoring assertions JSON object"></p>
<p>This next example checks for a <strong>boolean</strong> value in the <code>owner.site_admin</code> property</p>
<p><img src="/docs/images/api-checks/assertions-5.png" alt="api monitoring assertions nested JSON object"></p>
<h3 id="asserting-arrays">Asserting arrays</h3>
<p>For response bodies with JSON arrays you use JSON paths <code>[]</code> expressions.</p>
<p>In the first example below we check if the first item in our result array has a property <code>title</code></p>
<p><img src="/docs/images/api-checks/assertions-6.png" alt="api monitoring assertions nested JSON array"></p>
<p>In the next example we pick the last item in the array and check if the <code>customerId</code> property has the value <code>123abc</code></p>
<p><img src="/docs/images/api-checks/assertions-7.png" alt="api monitoring assertions nested JSON array pick item"></p>
<p>In this example we pick the item with index value 4. This is the 5th item as array indexes start at 0. We then assert
that the <code>responseTime</code> property is less than <code>2000</code>.</p>
<p><img src="/docs/images/api-checks/assertions-8.png" alt="api monitoring assertions nested JSON array pick nth item"></p>
<p>In the last example we check if the returned array has more than 10 items.</p>
<p><img src="/docs/images/api-checks/assertions-9.png" alt="api monitoring array has more than 10 items"></p>
<h2 id="deprecated-custom-non-json-path-properties">Deprecated: Custom, non-JSON path properties</h2>
<p>Before we released the feature to use JSON path queries, Checkly had a custom way of querying the contents of a JSON
response body.</p>
<p>This method is still available for backwards compatibility reasons, but no longer advised as it is much less flexible and
powerful.</p>
<p>For reference, here is an example. We are checking the <code>size</code> property that is part of the product object in the JSON response
and has a value of &lsquo;XL&rsquo;.</p>
<p><img src="/docs/images/api-checks/assertions-dep-1.png" alt="api monitoring deprecated custom query"></p>
<h2 id="using-regular-expressions">Using regular expressions</h2>
<p>Regular expressions give you the power to extract specific parts of text from a larger text using <strong>capturing groups</strong>.
You can use regular expressions with two assertions sources:</p>
<ol>
<li><strong>Text body:</strong> Use the property field to add your regex.</li>
<li><strong>Headers:</strong> First select the header your interested in in the property field, then click &ldquo;add regex&rdquo;.</li>
</ol>
<p>Under the hood, we use the stock Javascript regular expressions implementation. Specifically, we use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match">.match()</a>
method. We <em>do not use the <code>/g</code> modifier</em> and return the first matched group the expression finds.</p>
<p>Sounds more complicated than it is. Here is an example:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript">
<span class="kr">const</span> <span class="nx">paragraph</span> <span class="o">=</span> <span class="s1">&#39;The quick brown fox jumps over the lazy dog. It barked.&#39;</span>
<span class="kr">const</span> <span class="nx">regex</span> <span class="o">=</span> <span class="sr">/quick (.*) fox/</span>
<span class="kr">const</span> <span class="nx">found</span> <span class="o">=</span> <span class="nx">paragraph</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">regex</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">found</span><span class="p">)</span>

<span class="c1">// [ &#39;quick brown fox&#39;,
</span><span class="c1"></span><span class="c1">//  &#39;brown&#39;,
</span><span class="c1"></span><span class="c1">//  index: 4,
</span><span class="c1"></span><span class="c1">//  input: &#39;The quick brown fox jumps over the lazy dog. It barked.&#39; ]
</span></code></pre></div><p>In the example above we return the string <code>brown</code> because it is the first capture group, the <code>(.*)</code> bit.
The first item <code>quick brown fox</code> is the full match, we do not return.</p>
<div class="alert alert-info">Remember: regular expressions in assertions only return the <strong>first capturing group</strong></div>

<h3 id="text-body-assertions-with-regular-expressions">Text body assertions with regular expressions</h3>
<p>If our API returns HTML, there might be a <code>lang=&quot;en&quot;</code> attribute in the <code>&lt;html&gt;</code> element. We can capture the two character
country/language code value of that attribute with the following expression.</p>
<p><img src="/docs/images/api-checks/assertions-10.png" alt="api monitoring use regular expression on text body"></p>
<p>The expression <code>lang=&quot;(.{2})&quot;</code> means &lsquo;grab any of the first two characters between <code>lang=&quot;</code> and the next <code>&quot;</code>&rsquo;. If we were
sure there are only non-capital characters, we could tighten it up a bit with <code>lang=&quot;([a-z]*)&quot;</code>.</p>
<h3 id="header-assertions-with-regular-expressions">Header assertions with regular expressions</h3>
<p>We can use regular expressions with headers too. In this example, we check if the <code>max-age</code> property of a <code>Strict-Transport-Security</code>
response header is above a <code>100000</code></p>
<p><img src="/docs/images/api-checks/assertions-11.png" alt="api monitoring use regular expression on http header"></p>
</article>
      <hr class="pt-2 mb-2" />
      
      <div class="text-right mb-4">
        <a href="https://checklyhq.com/docs/api-checks/limits/">Next: Response time limits
        </a>
      </div>
      
    </div>
    
    <aside class="docs-toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#how-assertions-work">How assertions work</a></li>
    <li><a href="#source">Source</a></li>
    <li><a href="#property">Property</a></li>
    <li><a href="#comparison">Comparison</a></li>
    <li><a href="#target">Target</a></li>
    <li><a href="#json-responses-with-json-path">JSON responses with JSON path</a>
      <ul>
        <li><a href="#json-path-primer">JSON path primer</a></li>
        <li><a href="#asserting-basic-types">Asserting basic types</a></li>
        <li><a href="#nested-properties">Nested properties</a></li>
        <li><a href="#asserting-arrays">Asserting arrays</a></li>
      </ul>
    </li>
    <li><a href="#deprecated-custom-non-json-path-properties">Deprecated: Custom, non-JSON path properties</a></li>
    <li><a href="#using-regular-expressions">Using regular expressions</a>
      <ul>
        <li><a href="#text-body-assertions-with-regular-expressions">Text body assertions with regular expressions</a></li>
        <li><a href="#header-assertions-with-regular-expressions">Header assertions with regular expressions</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </aside>
    
  </div>

  
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
        integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
        integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script src="/js/index.js"></script>

  <script>
    docsearch({
      apiKey: 'b2b616fdea14b860ff00c72fa72bf267',
      indexName: 'checkly_docs',
      appId: 'LCMJSZN73Z',
      inputSelector: '#search',
      debug: false
    })
  </script>
</body>
</html>
