<!DOCTYPE html><html lang="en"><head><title>Timeouts | Checkly </title><meta charset="utf-8"><meta name="description" content="Checkly is the easiest way to actively monitor your API endpoints and Browser click flows from a single dashboard"><meta name="viewport" content="width=device-width" initial-scale="1" maximum-scale="1"><meta property="og:type" content="article"><meta property="og:title" content="Timeouts | Checkly "><meta property="og:description" content="Checkly is the easiest way to actively monitor your API endpoints and Browser click flows from a single dashboard"><meta property="og:image" content="https://checklyhq.com/images/dashboard-screen@2x.png"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Timeouts | Checkly "><meta property="twitter:description" content="Checkly is the easiest way to actively monitor your API endpoints and Browser click flows from a single dashboard"><meta property="twitter:image" content="https://checklyhq.com/images/dashboard-screen@2x.png"><link rel="icon" type="image/png" href="/images/racoon_favicon.png"><link rel="alternate" href="https://checklyhq.com" hreflang="en-us"><link rel="canonical" href="https://checklyhq.com"><link rel="stylesheet" href="/css/style.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-110523681-1"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110523681-1');
  
  gtag('config', 'UA-110523681-1', { 'optimize_id': 'GTM-PNWRVST'});
</script><style>.async-hide { opacity: 0 !important}</style><script>if (location.host === 'checklyhq.com') {
 (function(a,s,y,n,c,h,i,d,e){s.className+=' ' + y;h.start=1*new Date;
 h.end=i = function () {
   s.className = s.className.replace(RegExp(' ?' + y), '')
 };
 (a[n]=a[n] || []).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
 })(window,document.documentElement,'async-hide','dataLayer',4000,
 {'GTM-PNWRVST':true});
}</script><script>if (location.host === 'checklyhq.com') {
 (function(h,o,t,j,a,r){
 h.hj=h.hj || function () {
   (h.hj.q = h.hj.q || []).push(arguments)
 };
 h._hjSettings={hjid: 717179, hjsv: 6};
 a=o.getElementsByTagName('head')[0];
 r=o.createElement('script');r.async=1;
 r.src=t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
 a.appendChild(r);
 })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
}</script><script>if (location.host === 'checklyhq.com') {
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
  heap.load("3553865455");
}</script></head></html><body><nav class="navbar navbar-toggleable-sm fixed-top"><div class="container px-0"><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"><span></span><span></span><span></span></button><a class="navbar-brand" href="/"><img src="/images/text_racoon_logo.svg" width="120"><p class="beta">beta!</p></a><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/pricing">Pricing</a></li><li class="nav-item"><a class="nav-link" href="/docs">Docs</a></li><li class="nav-item"><a class="nav-link" href="/whats-new">What's new</a></li></ul><form class="form-inline my-2 my-lg-0 ml-md-3"><a class="btn btn-outline-secondary my-2 my-sm-0 mr-3 ml-md-3" href="https://app.checklyhq.com/login">Log in</a><a class="btn btn-success my-2 my-sm-0" href="https://app.checklyhq.com/signup">Start a free trial</a></form></div></div></nav><div class="main docs"><div class="container"><div class="row"><div class="col-sm-3"><ul class="sidebar-menu">

<li class="sidebar-menu-item"><h3>API Checks</h3><ul class="sidebar-menu-sub">
<li class="sidebar-menu-sub-item "><a href="/docs/api-checks/getting-started/">Quickstart</a></li>
</ul></li>

<li class="sidebar-menu-item"><h3>Browser Checks</h3><ul class="sidebar-menu-sub">
<li class="sidebar-menu-sub-item "><a href="/docs/browser-checks/quickstart/">Quickstart</a></li>

<li class="sidebar-menu-sub-item "><a href="/docs/browser-checks/screenshots/">Taking screenshots</a></li>

<li class="sidebar-menu-sub-item active"><a href="/docs/browser-checks/timeouts/">Timeouts</a></li><div class="side-bar-menu-toc"><span><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#dealing-with-timeouts">Dealing with timeouts</a></li>
<li><a href="#timeouts-in-mocha">Timeouts in Mocha</a></li>
<li><a href="#timeouts-in-puppeteer">Timeouts in Puppeteer</a>
<ul>
<li><a href="#page-waitforselector">page.waitForSelector()</a></li>
<li><a href="#page-setdefaultnavigationtimeout-timeout">page.setDefaultNavigationTimeout(timeout)</a></li>
<li><a href="#page-waitfor-timeout">page.waitFor(timeout)</a></li>
</ul></li>
</ul></li>
</ul>
</nav></span></div>

<li class="sidebar-menu-sub-item "><a href="/docs/browser-checks/runner-specification/">Runner specification</a></li>
</ul></li>

<li class="sidebar-menu-item"><h3>Alerting</h3><ul class="sidebar-menu-sub">
<li class="sidebar-menu-sub-item "><a href="/docs/alerting/settings/">General settings</a></li>
</ul></li>
</div><div class="col-sm-9"><div class="markdown py-3"><h1>Timeouts</h1><span>

<h2 id="dealing-with-timeouts">Dealing with timeouts</h2>

<p>Setting correct timeout values for your browser checks can mean the difference between a good night&rsquo;s sleep or alerts bugging
you because your site or apps performance dropped by 500 milliseconds.</p>

<p>You can deal with timeouts at two levels and we recommend you study them in the order below: first set global timeouts on
the Mocha suite and test level, then use the timeout options in Puppeteer. Good use of the <code>page.waitForSelector()</code> can
save you a lot of headaches.</p>

<h2 id="timeouts-in-mocha">Timeouts in Mocha</h2>

<blockquote>
<p>Default: 2 sec</p>
</blockquote>

<p>At the highest level, you can set timeout values in your Mocha code. These timeouts are enforced regardless of what
happens in the Chromium browser started by Puppeteer. For Checkly checks, we recommend using timeout values
on each test. In the example below, we added a <code>.timeout(10000)</code> to the <code>it</code> function. The default timeout of 2 seconds
is almost always too short to run any meaningful check.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Check Google Homepage&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;has title &#34;Google&#34;&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="s1">&#39;https://google.com&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">waitUntil</span><span class="o">:</span> <span class="s1">&#39;networkidle2&#39;</span> <span class="p">})</span>
    <span class="k">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">title</span><span class="p">()</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="s1">&#39;Google&#39;</span><span class="p">)</span>
  <span class="p">}).</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div>
<p>This means this test will fail if it does not resolve within 10 seconds. You can also add a timeout at the suite level,
however the syntax is a bit different if you want to use arrow functions: you have to pass in the <code>suite</code> and then set
the timeout on that object.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Check Google Homepage&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;has title &#34;Google&#34;&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="s1">&#39;https://google.com&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">waitUntil</span><span class="o">:</span> <span class="s1">&#39;networkidle2&#39;</span> <span class="p">})</span>
    <span class="k">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">title</span><span class="p">()</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="s1">&#39;Google&#39;</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">})</span>
</code></pre></div>
<p><a href="https://mochajs.org/#timeouts">Read more on the Mocha site</a> and in this <a href="https://github.com/mochajs/mocha/issues/2018">enlightening Github issue</a></p>

<h2 id="timeouts-in-puppeteer">Timeouts in Puppeteer</h2>

<blockquote>
<p>Default: 30 sec</p>
</blockquote>

<p>In your Puppeteer code, you have a range of options to set timeouts for different actions. The default for most actions
is 30 seconds. There are two very important ones that you should use in almost every browser check:</p>

<h3 id="page-waitforselector">page.waitForSelector()</h3>

<p>This method waits for an element to appear in the page. This is your bread and butter and should be used whenever something
needs to be loaded after clicking, hovering, navigating etc. You can pass it an options object with a timeout attribute
to override the default 30 seconds.</p>

<p>In the example below, we type &lsquo;fluffy kittens&rsquo; into an input field on a search page and click &ldquo;submit&rdquo;. We then use the
<code>page.waitForSelector()</code> method and pass in a timeout of 5 seconds because we want this check to fail if it takes any longer.
You can also see we assing a 10 second timeout to the surrounding Mocha test.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;First search result is my link&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;input[name=q]&#39;</span><span class="p">,</span> <span class="s1">&#39;fluffy kittens&#39;</span><span class="p">)</span>
    <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;input[type=&#34;submit&#34;]&#39;</span><span class="p">)</span>
    <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s1">&#39;h3 a&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">timeout</span><span class="o">:</span> <span class="mi">5000</span> <span class="p">})</span>
    <span class="k">const</span> <span class="nx">links</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;h3 a&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">textContent</span> <span class="p">})</span>
    <span class="p">})</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s1">&#39;my link&#39;</span><span class="p">,</span> <span class="nx">links</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
  <span class="p">}).</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
</code></pre></div>
<p>This works exactly the same for the <code>page.waitForXpath()</code> function is you are using Xpath selectors instead of CSS selectors.</p>

<p><a href="https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#framewaitforselectorselector-options">Read more in the Puppeteer API docs</a></p>

<h3 id="page-setdefaultnavigationtimeout-timeout">page.setDefaultNavigationTimeout(timeout)</h3>

<p>You can tweak the navigation timeout with <code>page.setDefaultNavigationTimeout()</code>. This impact the timeout limits of the
initial load of your page or app and all subsequent navigation.</p>

<p><a href="https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#pagesetdefaultnavigationtimeouttimeout">Read more in the Puppeteer API docs</a></p>

<h3 id="page-waitfor-timeout">page.waitFor(timeout)</h3>

<p>Some pages can be finicky because of animations or some non-linear behaviour or dynamic content. This method allows you
to &ldquo;just wait&rdquo; for a set amount of time. The example below passes in a number. The result is the test will wait for five
seconds.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">waitFor</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</code></pre></div></span></div><hr class="my-4"><p>Last updated on March 27, 2018</p></div></div></div></div><footer class="footer"><div class="container"><div class="row footer-top"><div class="col-sm-2"><div class="mb-3 mb-md-0"><img src="/images/text_racoon_logo.svg" width="100px"></div></div><div class="col-sm-2"><div class="mb-3 mb-md-0"><h6>Product</h6><ul><li><a href="/pricing">Pricing</a></li><li><a href="/docs">Docs</a></li></ul></div></div><div class="col-sm-2"><div class="mb-3 mb-md-0"><h6>Company</h6><ul><li><a href="/support">Support</a></li><li><a href="/privacy">Privacy policy</a></li></ul></div></div><div class="col-sm-6"><h6>Get on topic product info and updates</h6><div id="mc_embed_signup"><form class="form-inline validate" action="https://run.us15.list-manage.com/subscribe/post?u=9af9712f622c6511cb2113669&amp;amp;id=adb061483c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate><input class="form-control email-address-input mb-3 mb-md-0 mr-md-2" type="email" value="" name="EMAIL" width="280px" id="mce-EMAIL" placeholder="Email address"><button class="btn btn-primary submit-button button" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe">Subscribe</button><div class="clear" id="mce-responses"><div class="response" id="mce-error-response" style="display:none;"></div><div class="response" id="mce-success-response" style="display:none;"></div></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_9af9712f622c6511cb2113669_adb061483c" tabindex="-1" value=""></div></form></div><div class="pt-2 text-muted"><small>no spam - unsubscribe anytime</small></div></div></div><div class="row footer-bottom"><div class="col-12"><span>Checkly · Paul-Lincke-Ufer 30, 10999, Berlin · Copyright © 2018</span><div class="float-right"><a class="mr-3" href="https://heapanalytics.com/?utm_source=badge" rel="nofollow"><img style="width:108px;height:41px;" src="//heapanalytics.com/img/badgeLight.png" alt="Heap | Mobile and Web Analytics"></a><a href="https://twitter.com/checklyhq" target="_blank"><img src="/images/twitter.svg"></a></div></div></div></div></footer><script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script><script src="/js/index.js"></script><div></div></body>